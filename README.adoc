= Redpanda Documentation Site
:url-docs: https://docs.redpanda.com
:url-org: https://github.com/redpanda-data
:url-ui: https://github.com/JakeSCahill/redpanda-docs-ui
:url-extensions: https://github.com/JakeSCahill/antora-extensions-and-macros
:hide-uri-scheme:
:url-contributing: meta-docs/CONTRIBUTING.adoc
:url-netlify: https://netlify.com
:url-netlify-docs: https://docs.netlify.com
:url-antora-docs: https://docs.antora.org
:url-redoc: https://github.com/Redocly/redoc
:idprefix:
:idseparator: -
ifdef::env-github[]
:important-caption: :exclamation:
:note-caption: :paperclip:
endif::[]
:toc:
:toc-title: Contents

toc::[]

[link=https://app.netlify.com/sites/incomparable-treacle-75bd5a/deploys]
image::https://api.netlify.com/api/v1/badges/478ad2ac-0538-412c-9df2-4e12216e47af/deploy-status[Netlify deploy status]

This is the Antora playbook project (site build) for the Redpanda documentation site published at {url-docs}.

== Playbook

The playbook, link:antora-playbook.yml[`antora-playbook.yml`], configures the production build for this site.
This playbook specifies the content sources, UI bundle URL, and global AsciiDoc attributes.

The production site is built for each change to the `main` branch.
A deploy preview of the site is also published for each pull request.

The link:local-antora-playbook.yml[`local-antora-playbook`] file is for local builds when developing the components in this site locally. This playbook is set up to read from your local Git repository rather than the remote one.

TIP: For an introduction to Antora and helpful tips for getting started with local development, see the {url-contributing}[Contributing guide].

== API component

The API component hosts all OpenAPI docs at the root of the site under the `/api` path.

The OpenAPI spec files are stored in the `api/modules/ROOT/attachments/` directory. The Asciidoc pages reference these attachments in the `page-api-spec-url` attribute. The {url-ui}/blob/main/src/layouts/swagger.hbs[`swagger` UI layout] uses this attribute to render the OpenAPI docs using {url-redoc}[Redoc].

image::images/api.png[Preview of API docs]

== Home component

The home page is configured as a dedicated component called `home` so that we can host it at the root of the site under the `/home` path.

The link:./home/antora.yml[`home/antora.yml`] file contains the content for the home page. This content is read by a template in the UI to produce the home page. The template for the home page is in the {url-ui}/blob/main/src/partials/home.hbs[`home.hbs`] file of the link:{url-ui}[`docs-ui` repository].

image::images/home.png[Preview of the home page]

== Search component

The site search page is configured as a dedicated component called `search` so that we can host it at the root of the site under the `/search` path.

Search is powered by an link:{url-algolia}[Algolia] search index. The index is generated on each build of the production site using the {url-extensions}[Algolia indexer extension].

image::images/search.png[Preview of site search]

== Global Asciidoc attributes

The `global-attributes` directory contains attributes that are made available site-wide across all components.

These attributes are merged into the playbook during a build using the {url-extensions}[global attributes extension].

== Extensions and macros

The Redpanda documentation site includes custom extensions and macros to enhance the site and provide custom features.

For details about all the extensions and macros, see {url-extensions}.

== Netlify configuration and redirects

The docs site is hosted on link:{url-netlify}[Netlify].

The Netlify build is configured in the `netlify.toml` file. The redirects in this file redirect users from the previous Docusaurus URLs to the new Antora ones.

NOTE: When you delete, rename, or move an existing page, use the {url-antora-docs}/antora/latest/page/page-aliases/[`page-aliases` attribute]. Do not use the `netlify.toml` file. The redirects in this file must be bulk URL redirects, such as removing or renaming a component or component version.

For details about this file, see the link:{url-netlify-docs}/configure-builds/file-based-configuration/[Netlify documentation].

== Contributing

To learn how to use the playbook and generate the docs site locally, see our link:{url-contributing}[contributing guide].